{% extends 'base.html' %}
{% load cart %}
{% load custom_filter %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<div class="container mt-4">
    <div class="row">
        <div class="col-md-6">
            <div id="productCarousel" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="{{ product.image.url }}" class="d-block w-100" alt="{{ product.name }}">
                    </div>
                    {% for image in product.images.all %}
                    <div class="carousel-item">
                        <img src="{{ image.image.url }}" class="d-block w-100" alt="{{ product.name }}">
                    </div>
                    {% endfor %}
                </div>
                <a class="carousel-control-prev" href="#productCarousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#productCarousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
       <div class="col-md-6 text-light">
    <h2>{{ product.name }}</h2>
    <p class="text-muted">Brand: {{ product.brand }}</p> <!-- Display brand if available -->
    <p class="text-warning"><strong>Ratings: </strong>
        {% for i in "12345" %}
            <span class="fa fa-star{% if product.rating >= i|add:0 %} checked{% endif %}"></span>
        {% endfor %}
        ({{ product.rating_count }} reviews)
    </p>
    <p>{{ product.description }}</p>
    
    <ul class="list-unstyled text-light">
        {% regroup product.product_attributes.all by attribute_key.name as grouped_attributes %}
        {% for group in grouped_attributes %}
            <strong>{{ group.grouper }}:</strong>
            <ul>
                {% for attribute in group.list %}
                    <li>{{ attribute.attribute_value.value }}</li>
                {% endfor %}
            </ul>
        {% endfor %}
    </ul>
    
    <p><strong>Price: </strong>{{ product.price|currency }}</p>
    <div class="d-flex flex-column flex-sm-row align-items-center">
        <div class="d-flex align-items-center mb-2 mb-sm-0">
            <form action="{% url 'cart' %}" method="post" class="mr-2">
                {% csrf_token %}
                <input type="hidden" name="product" value="{{ product.id }}">
                <input type="hidden" name="action" value="remove">
                <button type="submit" class="btn btn-outline-danger btn-sm">-</button>
            </form>
            <span class="mx-2">{{ product|cart_quantity:request.session.cart }}</span>
            <form action="{% url 'cart' %}" method="post" class="ml-2">
                {% csrf_token %}
                <input type="hidden" name="product" value="{{ product.id }}">
                <input type="hidden" name="action" value="add">
                <button type="submit" class="btn btn-outline-success btn-sm">+</button>
            </form>
        </div>
    </div>
</div>


           

            
       
    </div>
</div>
                </div>
            </div>
        </div>
    </div>
    

<!-- Additional styles for dark mode -->
<style>
    body {
        background-color: #1b1b1b; /* Dark background */
        color: #f8f9fa; /* Light text color */
    }

    h2, h4 {
        color: #ff5e57; /* Accent color for headings */
    }

    .carousel-item img {
        max-height: 400px; /* Control the height of images */
        object-fit: cover; /* Maintain aspect ratio */
    }

    .btn-outline-danger {
        border-color: #ff5e57; /* Change border color for buttons */
        color: #ff5e57; /* Button text color */
    }

    .btn-outline-danger:hover {
        background-color: #ff5e57; /* Change background color on hover */
        color: #ffffff; /* Change text color on hover */
    }

    .btn-outline-success {
        border-color: #28a745; /* Change border color for buttons */
        color: #28a745; /* Button text color */
    }

    .btn-outline-success:hover {
        background-color: #28a745; /* Change background color on hover */
        color: #ffffff; /* Change text color on hover */
    }

    .fa-star {
        color: #ffcc00; /* Star color */
    }

    .fa-star.checked {
        color: #ffcc00; /* Filled star color */
    }
</style>

{% endblock %}
